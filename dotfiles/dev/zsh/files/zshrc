# Plugin Manager
source "${HOME}/.zgenom/zgenom.zsh"
zgenom autoupdate

if ! zgenom saved; then
  # Core Settings
  export HOMEBREW_NO_AUTO_UPDATE=1

  ## Treat $PATH as a set, allows adding new directories to be more
  # code like.
  typeset -U path
  path=("/usr/local/bin" $path)
  path=("/opt/homebrew/bin" $path)

  # Theme
  zgenom load sindresorhus/pure

  # Expand aliases with space
  typeset -U GLOBALIAS_FILTER_VALUES
  zgenom ohmyzsh plugins/globalias

  ##
  # Always Clear Screen & Run `ls`
  ##
  AUTO_LS_COMMANDS=(exa git-status)

  zgenom load desyncr/auto-ls

  auto-ls-exa () {
    exa -l
    [[ $AUTO_LS_NEWLINE != false ]] && echo ""
  }

  # Temp Sandbox
  alias tmp='cd $(mktemp -d)'

  # Completion/Suggestions
  zgenom load zsh-users/zsh-autosuggestions
  zgenom load marlonrichert/zsh-autocomplete
  zstyle ':autocomplete:*' min-input 1

  ZSH_HIGHLIGHT_HIGHLIGHTERS=( main brackets )
  zgenom load zsh-users/zsh-syntax-highlighting
  zgenom load zdharma-continuum/fast-syntax-highlighting

  zgenom load ellie/atuin

  # ls
  TREE_IGNORE="cache|log|logs|node_modules|vendor"

  alias ls='exa --group-directories-first'
  alias la='ls -a'
  alias ll='ls --git -l'
  alias lt='ls --tree -D -L 2 -I ${TREE_IGNORE}'
  alias ltt='ls --tree -D -L 3 -I ${TREE_IGNORE}'
  alias lttt='ls --tree -D -L 4 -I ${TREE_IGNORE}'
  alias ltttt='ls --tree -D -L 5 -I ${TREE_IGNORE}'

  GLOBALIAS_FILTER_VALUES=(ls la ll lt ltt lttt lttt $GLOBALIAS_FILTER_VALUES)

  # SSH
  alias bssh="ssh -o UserKnownHostsFile=/dev/null -o StrictHostKeyChecking=no"
  alias bscp="scp -o UserKnownHostsFile=/dev/null -o StrictHostKeyChecking=no"

  # Development aliases
  alias ghb="cd ${HOME}/Code/src/github.com"
  alias glb="cd ${HOME}/Code/src/gitlab.com"

  for file in ~/.zsh/includes/*; do
      #source "$file"
      zgenom load ${file}
  done
fi






# if [ -e '/nix/var/nix/profiles/default/etc/profile.d/nix-daemon.sh' ]; then
#   . '/nix/var/nix/profiles/default/etc/profile.d/nix-daemon.sh'
# fi

#

# # bun completions
# [ -s "/Users/rawkode/.bun/_bun" ] && source "/Users/rawkode/.bun/_bun"
# export BUN_INSTALL="$HOME/.bun"
# path=("${BUN_INSTALL}/bin" $path)

# eval "$(direnv hook zsh)"

# export USE_GKE_GCLOUD_AUTH_PLUGIN=True

# export PNPM_HOME="/Users/rawkode/.local/share/pnpm"
# path=("${PNPM_HOME}" $path)
